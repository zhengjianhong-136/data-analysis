# AB实验
## 目录
- [1、什么是AB实验](#1什么是AB实验)
- [2、为什么需要AB实验](#2为什么需要AB实验)
- [3、如何做AB实验](#3如何做AB实验)
- [4、常见问题](#4常见问题)
- [5、AB实验的局限性](#5AB实验的局限性)
## 1、什么是AB实验[^1]
[^1]: 彼得·布鲁斯&安德鲁·布鲁斯《面向数据科学家的实用统计学》  

AB实验，又称AB测试、AB Test、ABT，本质上是假设检验，将实验分成两个组开展，进而确定两种处理、产品、过程等中较优的一个。在两组实验中，一般会有一组采用现有的标准处理，或者是不执行任何处理，称为对照组，而另一组称为实验组。实验中的一个典型假设是实验组要优于对照组。
在AB实验的时候，会预先进行假设，称为**零假设**和**备选假设**：
- 零假设：实验组VS对照组观察指标相同，无显著差异
- 备选假设：实验组VS对照组观察指标不同，有显著差异
  
## 2、为什么需要AB实验
- 降低决策风险：通过小规模测试来验证假设,避免全量发布带来的重大风险
- 数据驱动决策：用客观数据而不是主观判断来指导产品决策
- 持续优化迭代：通过不断的小规模实验来累积产品改进
- 解决争议：当团队对某个改动有分歧时,可以通过实验数据来达成共识
  
在互联网产品中,常用于测试新功能、界面改版、算法优化等场景

## 3、如何做AB实验[^2]
[^2]: 刘玉凤《AB实验：科学归因与增长的利器》    

常见的AB实验流程为：数据分析-实验假设-实验设计-实验运行-实验分析-实验决策
1. 数据分析  
  分析当前业务现状，找出瓶颈，提出优化方案/策略
2. 实验假设  
   根据方案确定提升指标，也就是实验待观测指标，分为绝对值类和比率类两类指标：
   - 绝对值类：可直接计算的单个指标，例如DAU、购买人数、购买金额等
   - 比率类：无法直接计算，需要两个指标计算得出，例如留存率、点击率、购买率等  
例如，本次实验假设通过X策略，可以提升购买率，预期提升涨幅为Y%
4. 实验设计
   - 实验样本选择
     这里的实验样本，也加实验参与单元，一般来说都是以用户粒度来进行实验，除了用户粒度有，还有：    
       1. 元素粒度，例如一篇文章，一首歌曲
       2. 页面粒度，例如某个产品页面
       3. 会话粒度，用户某次APP或者网站行为
       4. 设备粒度，指用户使用的设备，同个用户可能有多个不同设备
       5. 行为粒度，例如点击行为  
    这些粒度通常会造成数据不可信的情况，所以一般不常见（因为有可能是同个用户的操作，但是这些粒度被分到不同组）
   - 实验流量计算    
理论上来讲，实验样本越多越好，因为可以减少偶然性，保障实验结论可靠。现实情况下，由于流量有限，或者减少试错成本，是以小样本量进行实验。
最小样本量可以通过这个网站计算：https://www.evanmiller.org/ab-testing/sample-size.html    
   - 实验流量分割    
     流量分割，分为分流和分层两种模式。
   - 实验周期预估    
一般用实验所需的**最小样本量**和**单位时间内有效用户的流入量**进行粗略估计。但是实验时间即便达到最小样本量，也需要注意：
     - 工作日效应：周末的用户数量可能与工作日不同，即使是同一个用户，在工作日和周末也可能有不同的行为
     - 季节性效应：在一些特殊节日下，用户的行为可能会有所不同，比如节假日、寒暑假、开学季、热点大事件、双十一大促等
     - 新奇效应/首因效应：有些实验的初始效应往往较大或较小，需要时间才能稳定下来
正常情况下，建议实验周期至少为一周，时间太短容易遇到干扰，而且大部分用户行为在周一到周日的表现有较大差异。
5. 实验运行
6. 实验分析
7. 实验决策
## 4、常见问题
1. 两类错误
   - 第一类错误：拒绝了真实的原假设。也就是实验没有效果，但是被判断为有效果
   - 第二类错误：接受了假的原假设。也就是实验有效果，但是被判断为没有效果
2. 
## 5、AB实验的局限性
AB实验是常用的一种分析方法，但也存在局限性：
- 需要足够的样本量和时间周期
- 可能受到外部因素干扰
- 短期效果和长期效果可能不一致
- 不同用户群体的反应可能存在差异

